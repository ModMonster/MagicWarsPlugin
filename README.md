# Magic Wars

The PaperMC plugin for Magic Wars, a Minecraft minigame I developed.

See the game in action on my [YouTube channel](https://youtube.com/modmonster) by watching the [development video](https://www.youtube.com/watch?v=OQ9vNn9zbr8&pp=2AZt) or any of the playtest live streams! [[1]](https://www.youtube.com/watch?v=9UmkhSMucls) [[2]](https://www.youtube.com/watch?v=UW9iEXBvkTA) [[3]](https://www.youtube.com/watch?v=_xzraCkVUbI) [[4]](https://www.youtube.com/watch?v=JfyoZQ_v-7w)
## Getting Started
1. Clone the repository
```bash
  git clone https://github.com/ModMonster/MagicWarsPlugin.git
```

2. Run the Maven task `package` to generate a shaded JAR which can be added as a plugin to a PaperMC server. See [Run a Server](#run-a-server) to set up the server.
## Run a Server

1. Download the [latest release](https://github.com/ModMonster/MagicWarsPlugin/releases/latest)
2. Unzip the archive to your Paper server's `plugins` folder. This archive contains the plugin and default configuration.
3. Download [ProtocolLib](https://github.com/dmulloy2/ProtocolLib/releases/latest) (a required dependency for the plugin) and place in your server's `plugins` folder
4. (Optional) Connect the server to a Velocity or BungeeCord proxy - make sure to edit `config.yml` located at `plugins/Spells/config.yml` and supply the name of your lobby server for proper proxy integration
## Configuration
The plugin has two configuration files which are described as follows.

### config.yml
The main configuration file which allows configuration of main aspects of game

| Option                                     | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `lobby-server`                             | The name of the lobby server on a BungeeCord or Velocity network. If set to a value other than null, players will be sent to this server upon clicking the "Return to Lobby" compass or when the game is over If set to null, players will be kicked instead.                                                                                                                                                                                                                                      |
| `game-events`                              | A list of events that take place during the game. The first element in each list item is either BORDER_SHRINK or REFILL_CHESTS and represents the type of event. The second element is the time during the game at which this event occurs, in seconds. The third and fourth elements are only present with type BORDER_SHRINK, and represent the new size of the border and the speed at which the size change should happen, respectively.                                                       |
| `loot`                                     | A list of vanilla items which can be generated in loot chests. The first element in each list item corresponds to the Bukkit Material name; see https://hub.spigotmc.org/javadocs/spigot/org/bukkit/Material.html for a list of all Materials. The second element is the weight; the chance that the item is chosen when picking items to place inside the chest. Higher values give the item a higher chance of being chosen. The third element is the maximum stack size that will be generated. |
| `death-messages.adjectives`                | A list of adjectives that can be randomly chosen when a player dies.                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `death-messages.verbs`                     | A list of verbs that can be randomly chosen when a player dies.                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `death-messages.killed-template`           | The template for the message shown when a player kills another player. Can use the following placeholders: %victim% - the username of the player who was killed %killer% - the username of the killer %adjective% - randomly chosen adjective from death-messages.adjectives %verb% - randomly chosen verb from death-messages.verbs                                                                                                                                                               |
| `death-messages.killed-template-minion`    | The template for the message shown when a player's minion kills another player. Can use the following placeholders: %victim% - the username of the player who was killed %killer% - the username of the owner of the minion who killed the player %minion% - type of minion that did the killing (i.e. Zombie) %adjective% - randomly chosen adjective from death-messages.adjectives %verb% - randomly chosen verb from death-messages.verbs                                                      |
| `death-messages.death-templates`           | A list of generic template messages that can be shown when a player dies without another player's involvement. Can use the following placeholders: %player% - the username of the player who died                                                                                                                                                                                                                                                                                                  |
| `death-messages.death-templates-fire`      | A list of template messages to be shown when a player dies due to fire / burning. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                                       |
| `death-messages.death-templates-fall`      | A list of template messages to be shown when a player dies due to fall damage. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                                          |
| `death-messages.death-templates-drown`     | A list of template messages to be shown when a player dies due to drowning. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                                             |
| `death-messages.death-templates-explode`   | A list of template messages to be shown when a player dies due to explosion. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                                            |
| `death-messages.death-templates-lightning` | A list of template messages to be shown when a player dies due to being struck by lightning. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                            |
| `death-messages.death-templates-wither`    | A list of template messages to be shown when a player dies due to the Wither effect. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                                    |
| `death-messages.leave-templates`           | A list of template messages to be shown when a player leaves the game. Uses same placeholders as `death-messages.death-templates`                                                                                                                                                                                                                                                                                                                                                                  |

### maps.yml
A configuration file containing information about the world and the maps that can be chosen

| Option                          | Description                                                                                                                                                                                                                                                        |
|---------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `block-break-whitelist`         | A list of blocks which are allowed to be broken by the player.                                                                                                                                                                                                     |
| `block-interact-whitelist`      | A list of blocks which can be interacted with by the player.                                                                                                                                                                                                       |
| `maps`                          | A list of maps. The key of each entry acts as the ID of each map.                                                                                                                                                                                                  |
| `maps.[entry].name`             | The name of the map as shown to players.                                                                                                                                                                                                                           |
| `maps.[entry].world`            | The name of the world folder within `plugins/Spells/maps`.                                                                                                                                                                                                         |
| `maps.[entry].map-size`         | Size of map / 2 (distance from center of map to one edge). Used for setting the size of the world border. To set the center of the map, set the world border center position before copying the world to the `maps` folder                                         |
| `maps.[entry].pod-size`         | The bounding box of each spawning pod relative to its position which will be deleted when the game starts, represented as a list with the following schema: [negative-x, negative-y, negative-z, positive-x, positive-y, positive-z]                               |
| `maps.[entry].max-build-height` | Maximum building height for this map. Any block placement above this position will be cancelled.                                                                                                                                                                   |
| `maps.[entry].chest-locations`  | A list of all chests on the map. The first three values of each entry are the x, y, and z coordinates for the chest. The fourth value is whether the chest is at the center of the map (true/false). Chests at the center of the map cannot spawn enchanted books. |
| `maps.[entry].spawn-facing`     | The location that players should be looking toward when joining the game. Generally set to the center of the map.                                                                                                                                                  |
| `maps.[entry].spawn-locations`  | A list of coordinates which represents possible spawning positions for each player. When the game starts, these values and `pod-size` will determine the spawning pod area that is removed.                                                                        |
| `maps.[entry].min-players`      | The minimum number of players required to start a game on this map.                                                                                                                                                                                                |
| `maps.[entry].max-players`      | The maximum number of players this map can support.                                                                                                                                                                                                                |


## Acknowledgements

- [PaperMC](https://papermc.io)
- [ProtocolLib](https://github.com/dmulloy2/ProtocolLib)
- [FastBoard](https://github.com/MrMicky-FR/FastBoard)
## Contributing

Contributions are always welcome, but due to my inactivity on this project I might not look at them too much ðŸ˜…
That being said, feel free to submit any issues you find and submit any pull requests for changes you make.
## License

[GNU General Public License v3.0
](LICENSE.txt)